<!DOCTYPE html>
<html>

<head>
	<title>math</title>
	<link rel="stylesheet" type="text/css" href="css/site.css">
	<script type="text/javascript" src="js/site.js"></script>

	<style>
		body {
			font-size: 50px;
			height: 100%
		}
		input {
			font-size: 50px;
		}	
	</style>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
	<!--<script src="jquery.js"></script>-->
	<script>
		
	</script>
	<script>
		var setting = [
			{
				operator: '+',
				level: 0,
				enabled: true
			},
			{
				operator: '-',
				level: 0,
				enabled: false
			},
			{
				operator: '*',
				level: 0,
				enabled: false
			},
			{
				operator: '/',
				level: 0,
				enabled: false
			}
		];

		//var enabledSetting = map()

		var right = 0;
		var total = 0;
		var allowDivide = false;
		var num1;
		var num2;
		var operator = 0; // 0=multiple, 1=divide

		// &divide; or &#247;
		// &times; or &#215;

		$(() => {			
			//var ops = getURLParameter('operators');
            //if (ops) {
                //$('#url').val(sourceURL);
                //$('#my_video_1').children().attr('src', sourceURL);
            //}
			//if (setting.operators.length == 0) {
			//	setting.operators = ['+'];
			//}


			initNumber();
			showResult();
		});

		function showResult() {
			$("#right").text(right);
			$("#total").text(total);
		}

		function initNumber() {
			num1 = Math.floor((Math.random() * 9) + 1);
			num2 = Math.floor((Math.random() * 9) + 1);
			operator = 0;
			if (Math.random() >= 0.5 && allowDivide) {
				operator = 1;
				num1 = num1 * num2;
			}


			$("#num1").text(num1);
			$("#num2").text(num2);
			$("#operator").html(operator == 0 ? "&times;" : "&divide;");
			$("#txtResult").val("").focus();
		}

		function onResult() {
			var r = $("#txtResult").val();
			if (r == "") {
				$("#txtResult").focus();
				return;
			}

			if ((operator == 0 && num1 * num2 == r) ||
				(operator == 1 && num1 / num2 == r)) {
				right++;
			}
			total++;
			showResult();
			log(r);

			initNumber();
		}

		function log(r) {
			var s = num1 + " " + (operator == 0 ? "&times;" : "&divide;") + " " + num2 + " = " + r;
			var item = $("<div/>").html(s);

			if ((operator == 0 && num1 * num2 == r) ||
				(operator == 1 && num1 / num2 == r)) {
				item.addClass("right");
			} else {
				item.addClass("wrong");
			}
			$("#log").append(item);
		}
	</script>

</head>

<body>
	<div id="result">Score: <span id="right"></span> / <span id="total"></span></div>

	<div>
		<span id="num1"></span> <span id="operator"></span> <span id="num2"></span> =
		<span> <input id="txtResult" type="number" maxlength="3" /></span>
		<span> <input id="btnResult" type="button" value="Summit" onclick="onResult();"></span>
	</div>


	<div id="log">
	</div>
</body>

</html>